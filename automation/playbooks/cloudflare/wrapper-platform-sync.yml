---
- hosts: localhost
  gather_facts: false
  tasks:
    - name: Map survey variables -> playbook variables
      set_fact:
        domain: "{{ survey_domain | default(domain | default('')) }}"
        cf_action: "{{ survey_action | default(cf_action | default('')) }}"
        # Safe defaults expected by included tasks
        record_keys: "{{ survey_record_keys | default(record_keys | default([])) }}"
        selected_record_keys: "{{ survey_selected_record_keys | default(selected_record_keys | default(record_keys | default([]))) }}"
        standard_records: "{{ survey_standard_records | default(standard_records | default([])) }}"
        platform_presets: "{{ survey_platform_presets | default(platform_presets | default({})) }}"

    - include_tasks: ../../tasks/cloudflare/platform-sync.yml
